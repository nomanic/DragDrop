!function(){function n(e){var n=0,t=0
return e.targetTouches&&e.targetTouches.length>0?(n=e.targetTouches[0].pageX,t=e.targetTouches[0].pageY):e.pageX||e.pageY?(n=e.pageX,t=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:n,y:t}}function t(e,n){return"string"==typeof e?""===e?n:document.getElementById(e):e}function o(e){var n=0,o=0,i=0,r=0,c=t(e),s=t(e).offsetWidth,u=t(e).offsetHeight
if(n=c.offsetLeft,o=c.offsetTop,c.offsetParent){for(var l=c;l=l.parentNode;)i=l.scrollTop?l.scrollTop:0,r=l.scrollLeft?l.scrollLeft:0,n-=r,o-=i
for(;c=c.offsetParent;)n+=c.offsetLeft,o+=c.offsetTop}var f=a?document.body.scrollLeft:window.pageXOffset,d=a?document.body.scrollTop:window.pageYOffset
return[n+f,n+f+s,o+d,o+d+u]}function i(e){var n=o(e)
return{x:n[0],y:n[2]}}var r="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,a=-1!=navigator.appName.indexOf("Microsoft Internet Explorer"),c="drag",s=function(){var n={},t=r?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},a=[],v=function(e,n){for(var t=0,o=a.length;o>t;t++)if(a[t]&&a[t].element===e&&a[t].anchor===n)return!0
return!1},w=function(e,n,t){a[e._id]&&a[e._id].events[n]&&t(a[e._id].events[n])},T=function(e,n){return n=n||{},n.element=e,n.anchor=n.anchor||e,n.boundingBox=n.boundingBox||null,n.releaseAnchors=n.releaseAnchors||[],n.releaseAnchors.unshift(document),n},A=1,q=function(){this._id=A++}
return q.prototype.unbind=function(){return s.unbind(this)},q.prototype.bindEvent=function(e,n){return s.bindEvent(this,e,n)},q.prototype.unbindEvent=function(e,n){return s.unbindEvent(this,e,n)},q.prototype.invokeEvent=function(e,n){return s.invokeEvent(this,e,n)},q.prototype.setBoundingBox=function(e){a[this._id].boundingBox=e},n.bind=function(e,n){if(n=T(e,n),!p(n.element))throw Error("Must give an element to drag")
if("static"===l(n.element,"position"))throw Error("Cannot drag-drop an element with position:static")
if(!v(n.element,n.anchor)){var w=new q,A={element:n.element,anchor:n.anchor,child:n.childscroll,center:n.center,click:n.click,dclick:n.dclick,clc:0,mving:0,momentum:n.momentum,mass:n.momentum,drag:n.drag?n.drag:.95,params:n.params,releaseAnchors:n.releaseAnchors,dragging:!1,event:null,shouldUnbind:!1,boundingBox:n.boundingBox,events:{beforedrag:y(n.beforedrag),dragstart:y(n.dragstart),dragend:y(n.dragend),drag:y(n.drag),unbind:y(n.unbind)}}
return A.event=x.bind(A.child?A.child:A.anchor,t.start,function(e){function n(){if(!A.mving){A.mving=1
var e=A.element
if(Math.abs(e.vx)>.5||Math.abs(e.vy)>.5){var t=Math.abs(((new Date).getTime()-e.d0.getTime())/1e3)
if(A.child){(A.x-=e.vx*t+(e.vx=e.vx*(1-A.drag*t)))+(A.y-=e.vy*t+(e.vy=e.vy*(1-A.drag*t)))+(e.d0=new Date)}else{(A.x+=e.vx*t+(e.vx=e.vx*(1-A.drag*t)))+(A.y+=e.vy*t+(e.vy=e.vy*(1-A.drag*t)))+(e.d0=new Date)}var o=A.x,i=A.y
if(A.boundingBox){var r,a,c,s,u=A.boundingBox
if("offsetParent"===u){var d=A.element.offsetParent
"relative"===l(A.element,"position")?(r=-P,c=-B):r=c=0,a=d.clientWidth+r,s=d.clientHeight+c}else if("windowSize"===u){var m=f()
"relative"===l(A.element,"position")?(r=-X.x,c=-X.y):r=c=0,a=m.x+r,s=m.y+c}else r=u.x.min,a=u.x.max,c=u.y.min,s=u.y.max
o=Math.max(r,Math.min(a-e.offsetWidth,o)),i=Math.max(c,Math.min(s-e.offsetHeight,i))}A.child?(e.scrollLeft=o,e.scrollTop=i,A.x=IV(e.scrollLeft),A.y=IV(e.scrollTop)):(e.style.left=o+"px",e.style.top=i+"px",A.x=e.offsetLeft,A.y=e.offsetTop),requestTimeout(n,100)}else e.vx=0,e.vy=0
A.mving=0}}function a(e){A.clc=0
var n=A.click
n?n(A.element):0}function v(e,n,t,o){return Math.sqrt((e-t)*(e-t)+(n-o)*(n-o))}function p(e){return function(t){for(var o=A.element,i=0,r=Y.length;r>i;i++)x.unbind(Y[i])
if(A.dragging=!1,h(o,c),A.shouldUnbind&&s.unbind(o,A.anchor),2==A.clc){if(A.clc=0,A.events.dragend.call(o,new b("dragend",t,A,{releaseAnchor:e},A.params)),A.momentum){o.d1=new Date
var a=Math.abs((o.d1.getTime()-o.d0.getTime())/500),u=a*a,l=1e-4*A.mass
if(A.child?(o.vx=l*(o.x0-o.scrollLeft)/u,o.vy=l*(o.y0-o.scrollTop)/u):(o.vx=l*(o.offsetLeft-o.x0)/u,o.vy=l*(o.offsetTop-o.y0)/u),Math.abs(o.vx)>200||Math.abs(o.vy)>200){var f=Math.abs(o.vx)/Math.abs(o.vy)
Math.abs(o.vx)>Math.abs(o.vy)?(o.vy=200/f*(o.vy>0?1:-1),o.vx=200*(o.vx>0?1:-1)):(o.vx=200*f*(o.vy>0?1:-1),o.vy=200*(o.vy>0?1:-1))}o.d0=new Date,n()}return m(t)}}}if(window.event&&1===e.button||0===e.button||r){m(e)
var w=A.child,y=r?e.changedTouches[0].pageX:e.clientX,T=r?e.changedTouches[0].pageY:e.clientY,q=A.element,E=q.offsetHeight,F=q.offsetWidth,L=A.dclick
A.events.beforedrag.call(q,new b("beforedrag",e,A),A.params),A.dragging=!0,g(q,c)
var M=o(q),R=1==A.center?y-M[0]-F/2:0,k=1==A.center?T-M[2]-E/2:0
if(w){var D=q.scrollLeft,C=q.scrollTop,P=q.scrollLeft,B=q.scrollTop,X=i(w)
q.x0=q.scrollLeft,q.y0=q.scrollTop}else{var D=u(q,"left")+R,C=u(q,"top")+k,P=q.offsetLeft,B=q.offsetTop,X=d(q)
q.x0=q.offsetLeft,q.y0=q.offsetTop}var Y=[],H=r?A.anchor:document
if(0==A.clc){A.clc=1
A.click?A.tm=requestTimeout(a,500):0}else if(1==A.clc&&L){A.clc=0
A.tm?clearRequestTimeout(A.tm):0,L?L(q):0
return m(e)}q.vx=0,q.vy=0,q.d0=new Date,q.d2=new Date,Y.push(x.bind(H,t.move,function(e){var n=r?e.changedTouches[0].pageX:e.clientX,t=r?e.changedTouches[0].pageY:e.clientY,o=A.element,i=o.offsetHeight,a=o.offsetWidth
if(o.d0=o.d2,o.d2=new Date,v(n,t,y,T)>3||2==A.clc){A.clc=2
A.tm?clearRequestTimeout(A.tm):0
if(w){o.x0=o.scrollLeft,o.y0=o.scrollTop
var c=D-(n-y),s=C-(t-T)}else{o.x0=o.offsetLeft,o.y0=o.offsetTop
var c=D+(n-y),s=C+(t-T)}if(A.boundingBox){var u,d,h,g,p=A.boundingBox
if("offsetParent"===p){var x=A.element.offsetParent
"relative"===l(A.element,"position")?(u=-P,h=-B):u=h=0,d=x.clientWidth+u,g=x.clientHeight+h}else if("windowSize"===p){var q=f()
"relative"===l(A.element,"position")?(u=-X.x,h=-X.y):u=h=0,d=q.x+u,g=q.y+h}else u=p.x.min,d=p.x.max,h=p.y.min,g=p.y.max
c=Math.max(u,Math.min(d-a,c)),s=Math.max(h,Math.min(g-i,s))}w?(o.scrollLeft=IV(c),o.scrollTop=IV(s),A.x=o.scrollLeft,A.y=o.scrollTop):(o.style.left=c+"px",o.style.top=s+"px",A.x=o.offsetLeft,A.y=o.offsetTop),A.events.drag.call(o,new b("drag",e,A),A.params)}return m(e)}))
for(var W=0,N=A.releaseAnchors.length;N>W;W++){var _=A.releaseAnchors[W]
Y.push(x.bind(_,t.end,p(_)))}return document.body.focus(),Y.push(x.bind(document,"selectstart",!1)),Y.push(x.bind(A.anchor,"dragstart",!1)),A.events.dragstart.call(q,new b("dragstart",e,A),A.params),!1}}),a[w._id]=A,w}},n.unbind=function(n){if(n instanceof q){var t=n._id
a[t]&&(a[t].dragging?a[t].shouldUnbind=!0:(x.unbind(a[t].event),a[t]=null),binding.events.unbind.call(binding.element,new b("unbind",e,binding),binding.params))}},n.bindEvent=function(e,n,t){w(e,n,function(e){e.push(t)})},n.unbindEvent=function(e,n,t){w(e,n,function(e){e.remove(t)})},n.invokeEvent=function(e,n,t){w(e,n,function(o){o.call(a[e._id].element,new b(n,t,e))})},n}(),u=function(e,n){var t=parseFloat(l(e,n))
return isNaN(t)?0:t},l=function(e,n){return e.currentStyle?e.currentStyle[n]:window.getComputedStyle?document.defaultView.getComputedStyle(e,null).getPropertyValue(n):e.style?e.style[n]:void 0},f=function(){return{x:window.innerWidth||document.documentElement.clientWidth||body().clientWidth,y:window.innerHeight||document.documentElement.clientHeight||body().clientHeight}},d=function(e){var n=0,t=0
if(e.offsetParent)do n+=e.offsetLeft,t+=e.offsetTop
while(e=e.offsetParent)
return{x:n,y:t}},m=function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,!1},v={},h=function(e,n){v[n]||(v[n]=RegExp("(^|\\s)+"+n+"(\\s|$)+")),e.className=e.className.replace(v[n]," ")},g=function(e,n){h(e,n),e.className+=" "+n},p=function(e){return!(!e||"object"!=typeof e)},w=function(e){var n
return e.target?n=e.target:e.srcElement&&(n=e.srcElement),3===n.nodeType&&(n=n.parentNode),n},y=function(e){var n=[],t=function(){for(var e,t=0,o=n.length;o>t;t++)e=n[t].apply(this,arguments)
return e}
return t.push=function(){n.push.apply(n,arguments)},t.remove=function(){var e=Array.prototype.slice.call(arguments),t=[]
e:for(var o=0,i=n.length;i>o;o++){for(var r=0,a=e.length;a>r;r++)if(n[o]===e[r])continue e
t.push(n[o])}n=t},"function"==typeof e&&n.push(e),t},b=function(e,t,o,i){if(this.type=e,this.originalEvent=t,this.altKey=t.altKey||!1,this.ctrlKey=t.ctrlKey||!1,this.shiftKey=t.shiftKey||!1,this.timestamp=t.timestamp||+new Date,this.pos=n(t),this.binding=o,this.target=w(t),i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r])},x=function(){var e=function(){return document.addEventListener?function(e,n,t){e.addEventListener(n,t,!1)}:document.attachEvent?function(e,n,t){e.attachEvent("on"+n,t)}:function(){}}(),n=function(){return document.removeEventListener?function(e,n,t){e.removeEventListener(n,t,!1)}:document.detachEvent?function(e,n,t){e.detachEvent("on"+n,t)}:function(){}}()
return{bind:function(t,o,i){var r=i===!1?function(e){return m(e)}:i
i=function(e){return r.call(t,e||window.event)},e(t,o,i)
var a=function(){n(t,o,i)}
return a.unbind=function(){a()},a},unbind:function(e){e()}}}()
window.DragDrop=s,window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,n){window.setTimeout(e,1e3/60)}}(),window.requestTimeout=function(e,n){function t(){var r=(new Date).getTime(),a=r-o
a>=n?e.call():i.value=requestAnimFrame(t)}if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,n)
var o=(new Date).getTime(),i={}
return i.value=requestAnimFrame(t),i},window.clearRequestTimeout=function(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):clearTimeout(e)}}()
